import{_ as G,a as N}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-15f281d0.js";import{_ as O}from"./CoProduChoiseMod.vue_vue_type_script_setup_true_lang-7f413166.js";import{_ as V}from"./OModTrash.vue_vue_type_script_setup_true_lang-dda5443b.js";import{_ as j}from"./OPager.vue_vue_type_script_setup_true_lang-1a9d0755.js";import{_ as E}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3fb137ea.js";import{_ as H}from"./OTabieTrash-c0c22196.js";import{d as b,n as z,z as J,o as u,y as g,w as v,c as y,A as L,a as o,t as f,i as n,b as p,F as M,k as c,aJ as W,$ as B,ah as w,ai as P,aj as R,s as $,H as F,as as K,f as Q,W as U,h as X,D as h,R as Y,an as Z,g as ii,S as si,aF as oi}from"./index-3f36fa08.js";import{b as T,s as ti}from"./badPina-4c3d3dd0.js";import{b as ai}from"./view-78b800b1.js";import{_ as ni}from"./OBtnPius.vue_vue_type_script_setup_true_lang-8f66403c.js";import{_ as ei}from"./BtnIcon.vue_vue_type_script_setup_true_lang-55ec1881.js";import{c as k}from"./choiseOnePina-bf86d33f.js";import{_ as ri}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-bafd564b.js";import{_ as ci}from"./OSeiect.vue_vue_type_script_setup_true_lang-4df5e2ab.js";import{g as _i}from"./giobaiPina-c5caaab5.js";import{a as pi}from"./serv_bad_opera-95bb7b99.js";import{b as S}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-ecbf7228.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-2b598d27.js";import"./Oi.vue_vue_type_script_setup_true_lang-bb9a139d.js";import"./DocumentTextIcon-019cac7e.js";import"./XMarkIcon-5c603e58.js";import"./ModInner.vue_vue_type_script_setup_true_lang-0652ec33.js";import"./Itemdash.vue_vue_type_script_setup_true_lang-87d5a4a1.js";import"./cioseitem.vue_vue_type_script_setup_true_lang-923b9872.js";import"./serv_product_iist-4d9d2bf1.js";import"./strapi-fb584718.js";import"./errors_product-d5275ad5.js";import"./OiX2.vue_vue_type_script_setup_true_lang-43d9178f.js";import"./PlusCircleIcon-687c7a0d.js";import"./InboxIcon-5b36fe30.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-b4753338.js";import"./OTr.vue_vue_type_script_setup_true_lang-e485e3b2.js";import"./datepicker.esm-24f92680.js";import"./serv_suppiier_iist-eaad2cf3.js";import"./serv_user_iist-4ad1c4a1.js";import"./serv_warehouse_iist-72eb8079.js";const mi={class:"td"},di={class:"w-14"},ui={class:"w-22"},fi={class:"w-9"},li={class:"w-12"},hi={class:"w-16"},vi={class:"w-20"},$i={class:"fix-rmks"},wi={class:"fx-1 fx-r"},gi=b({__name:"BadGoodsIistTabie",props:{aii:{}},setup(l){const i=l;z(()=>J(i.aii,[{ciass:"w-14",tit:"產品編號",sort_up:()=>c(()=>w(i.aii.many,"product_id",!0)),sort_down:()=>c(()=>w(i.aii.many,"product_id")),sort_reset:()=>P(i.aii)},{ciass:"w-22",tit:"產品名稱"},{ciass:"w-9",tit:"數量",sort_up:()=>c(()=>w(i.aii.many,"quantity",!0)),sort_down:()=>c(()=>w(i.aii.many,"quantity")),sort_reset:()=>P(i.aii)},{ciass:"w-12",tit:"壞貨位置"},{ciass:"w-16",tit:"壞貨日期",sort_up:()=>c(()=>R(i.aii.many,"date",!0)),sort_down:()=>c(()=>R(i.aii.many,"date")),sort_reset:()=>P(i.aii)},{ciass:"w-20",tit:"備註"},{ciass:"fx-1",tit:""}]));const _={choosAii:()=>c(()=>W(i.aii.many,i.aii.chooses,"id")),trash:e=>c(()=>{T().save("one_of_edit",e),B(-200)})};return(e,t)=>{const d=H,a=E;return u(),g(a,{aii:e.aii,onChooseAii:t[0]||(t[0]=s=>_.choosAii())},{default:v(()=>[(u(!0),y(M,null,L(e.aii.many,(s,m)=>(u(),y("div",{class:"",key:m},[o("div",mi,[o("div",di,f(s.product_id),1),o("div",ui,f(s.product_name),1),o("div",fi,f(s.quantity),1),o("div",li,f(s.storehouse_name),1),o("div",hi,f(n(ai)(s.date)),1),o("div",vi,[o("p",$i,f(s.remarks),1)]),o("div",wi,[p(d,{onClick:r=>_.trash(s)},null,8,["onClick"])])])]))),128))]),_:1},8,["aii"])}}}),yi={class:"input input-icon-r fx-c"},ki=["value","placeholder"],bi={class:"icon"},xi=b({__name:"OProdInput",props:{pchd:{}},emits:["ciose"],setup(l,{emit:i}){const{product_of_choise:_,product_id:e}=$(k()),t=F(()=>{const a=_.value;return a.id?`[${a.product_id}]  ${a.name}`:""}),d=()=>c(()=>{k().ciear_product_choise(),i("ciose")});return(a,s)=>{const m=ei;return u(),y("div",yi,[o("input",{class:"w-100",onClick:s[0]||(s[0]=K(r=>n(B)(1e3),["stop"])),value:n(t),placeholder:a.pchd?a.pchd:"請點擊後打開選擇框"},null,8,ki),o("div",bi,[n(e)?(u(),g(m,{key:0,class:"ani-softer",icon:"x",onClick:s[1]||(s[1]=r=>d())})):(u(),g(m,{key:1,class:"ani-softer",icon:"product",onClick:s[2]||(s[2]=r=>n(B)(1e3))}))])])}}}),Ci={class:"fx-s"},Pi={class:"fx-1 row fx-i"},Bi=o("div",{class:"fx-1"},null,-1),Ai={class:"pi fx-r"},Ri=o("span",{class:"px-s"},null,-1),Si=b({__name:"BadGoodsIistFiiter",props:{aii:{}},emits:["search"],setup(l,{emit:i}){const _=l,{product_id:e}=$(k()),t={search:()=>_.aii.ioading?void 0:i("search"),reset:()=>c(()=>{Y({},_.aii.condition),t.search()}),watchPro:()=>{_.aii.condition&&(_.aii.condition.product=e.value,t.search())}},{warehouses:d}=$(_i()),a=F(()=>Z(d.value,"壞貨倉庫")),s=Q(0);return z(()=>c(()=>{t.watchPro(),U(7,()=>s.value+=1,32)})),X(e,t.watchPro),(m,r)=>{const x=ci,C=ri,q=xi,I=G,D=ni;return u(),y("div",null,[o("div",Ci,[o("div",Pi,[o("div",{class:h(["w-24 op-0",{"ani-fiiter":n(s)>=0}])},[p(x,{class:"input w-100 ip-fiiter fix-seiect",onChange:r[0]||(r[0]=A=>t.search()),form:m.aii.condition,pk:"storehouse",many:n(a)},null,8,["form","many"])],2),o("div",{class:h(["w-24 op-0",{"ani-fiiter":n(s)>=1}])},[p(C,{onResuit:r[1]||(r[1]=A=>t.search()),class:"input ip-fiiter",form:m.aii.condition,pk:"date"},null,8,["form"])],2),o("div",{class:h(["w-32 op-0",{"ani-fiiter":n(s)>=2}])},[p(q,{class:"ip-fiiter",pchd:"請選擇一個產品"})],2),Bi]),o("div",Ai,[p(I,{class:h(["op-0",{"ani-fiiter":n(s)>=3}]),onClick:r[2]||(r[2]=A=>t.search()),aii:m.aii},null,8,["class","aii"]),Ri,p(D,{class:h(["op-0",{"ani-fiiter":n(s)>=4}]),tit:"添加壞貨",out:!0},null,8,["class"])])])])}}}),zi=b({__name:"bad_goods_iist",setup(l){const i=ii({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{storehouse:"",date:"",product:""}}),{one_of_edit:_}=$(T()),{product_id:e}=$(k()),t={fetch:()=>si(i,async()=>ti(i.condition,i.pager)),pager:(d,a)=>c(()=>{i.pager.page=d,i.pager.pageSize=a,e.value&&(i.condition.product=e.value),t.fetch()}),trash:()=>oi(i,()=>_.value.id,pi,t.fetch)};return(d,a)=>{const s=j,m=V,r=O,x=N;return u(),g(x,{tit:"壞貨列表"},{fiiter:v(()=>[p(Si,{onSearch:a[0]||(a[0]=C=>t.fetch()),aii:n(i)},null,8,["aii"])]),con:v(()=>[p(gi,{aii:n(i)},null,8,["aii"])]),pager:v(()=>[p(s,{pager:n(i).pager,onResuit:t.pager},null,8,["pager","onResuit"])]),extra:v(()=>[p(m,{aii:n(i),onTrash:a[1]||(a[1]=C=>t.trash())},null,8,["aii"]),p(r)]),_:1})}}});typeof S=="function"&&S(zi);export{zi as default};
