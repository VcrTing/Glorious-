import{_ as W,a as j}from"./OBtnSearch.vue_vue_type_script_setup_true_lang-15f281d0.js";import{_ as G}from"./OPager.vue_vue_type_script_setup_true_lang-1a9d0755.js";import{_ as Q}from"./OBtnPius.vue_vue_type_script_setup_true_lang-8f66403c.js";import{q as N,J as X,x as P,K as Y,d as h,f as T,n as q,W as Z,o as u,c as f,a as t,D as w,i as o,b as d,k as l,R as ii,g as b,z as B,y as x,w as m,A as E,t as _,F as O,m as ti,O as si,U as oi,ah as v,ai as R,H as C,s as ai,e as z,S as ei}from"./index-3f36fa08.js";import{s as k}from"./strapi-fb584718.js";import{E as V}from"./errors_product-d5275ad5.js";import{_ as ni}from"./OBtnReset.vue_vue_type_script_setup_true_lang-844e1559.js";import{_ as ri}from"./OSearch.vue_vue_type_script_setup_true_lang-fef6184d.js";import{_ as ci}from"./OTimeFiiter.vue_vue_type_script_setup_true_lang-bafd564b.js";import{_ as _i}from"./CoSuppiierSeiectPure.vue_vue_type_script_setup_true_lang-d31422ee.js";import{_ as M}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3fb137ea.js";import{_ as pi}from"./OTabieDetaii.vue_vue_type_script_setup_true_lang-ea9bcd76.js";import{b as di,m as S,a as y}from"./view-78b800b1.js";import{invoiceCreatPina as U}from"./invoiceCreatPina-0c948e92.js";import{_ as ui,a as mi}from"./Pan.vue_vue_type_script_setup_true_lang-27d6a020.js";import{b as A}from"./route-block-83d24a4e.js";import"./MBtn.vue_vue_type_script_setup_true_lang-ecbf7228.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-2b598d27.js";import"./Oi.vue_vue_type_script_setup_true_lang-bb9a139d.js";import"./DocumentTextIcon-019cac7e.js";import"./XMarkIcon-5c603e58.js";import"./OiX2.vue_vue_type_script_setup_true_lang-43d9178f.js";import"./PlusCircleIcon-687c7a0d.js";import"./BtnIcon.vue_vue_type_script_setup_true_lang-55ec1881.js";import"./datepicker.esm-24f92680.js";import"./giobaiPina-c5caaab5.js";import"./serv_suppiier_iist-eaad2cf3.js";import"./serv_user_iist-4ad1c4a1.js";import"./serv_warehouse_iist-72eb8079.js";import"./InboxIcon-5b36fe30.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-b4753338.js";import"./OTr.vue_vue_type_script_setup_true_lang-e485e3b2.js";import"./serv_product_iist-4d9d2bf1.js";const H="invoices",li=async(a,i)=>N(V,async()=>X(await P.get(H,k.buiid_pager(a,i)),["supplier"])),fi=async a=>N(V,async()=>Y(await P.one(H,a+""))),vi={class:"fx-s"},hi={class:"fx-1 row fx-i"},wi=h({__name:"InvoiceIistFiiter",props:{aii:{}},emits:["search"],setup(a,{emit:i}){const r=a,p=T(),s={search:()=>r.aii.ioading?void 0:i("search"),reset:()=>l(()=>{ii({},r.aii.condition),p.value&&p.value.ciear(),console.log("訂單過濾 =",r.aii.condition),s.search()})},e=T(0);return q(()=>Z(7,()=>e.value+=1,32)),(c,n)=>{const I=_i,D=ci,J=ri,K=ni,L=W;return u(),f("div",vi,[t("div",hi,[t("div",{class:w(["w-25 op-0",{"ani-fiiter":o(e)>=1}])},[d(I,{onResuit:n[0]||(n[0]=g=>s.search()),class:"input w-100 ip-fiiter fix-seiect",form:c.aii.condition,pk:"supplier"},null,8,["form"])],2),t("div",{class:w(["w-28 op-0 ip-fiiter",{"ani-fiiter":o(e)>=2}])},[d(D,{onResuit:n[1]||(n[1]=g=>s.search()),class:"input ip-fiiter",form:c.aii.condition,pk:"date"},null,8,["form"])],2),t("div",{class:w(["w-36 ip-fiiter op-0",{"ani-fiiter":o(e)>=3}])},[d(J,{onResuit:n[2]||(n[2]=g=>s.search()),aii:c.aii.condition,pk:"invoice_id",pchd:"請輸入供應商參考編號"},null,8,["aii"])],2)]),t("div",{class:w(["pi op-0",{"ani-fiiter":o(e)>=5}])},[d(K,{onClick:n[3]||(n[3]=g=>s.reset())})],2),t("div",{class:w(["pi op-0",{"ani-fiiter":o(e)>=6}])},[d(L,{onClick:n[4]||(n[4]=g=>s.search()),aii:c.aii},null,8,["aii"])],2)])}}}),F=a=>a.supplier?a.supplier:{},$={suppiier_id:(a={})=>F(a).supplier_id,suppiier_name:(a={})=>F(a).name,restock_product_id:a=>{const i=a.product?a.product:{};return i.product_id?i.product_id:a.product},restock_product_name:a=>{const i=a.product?a.product:{};return i.name?i.name:a.name},restock_qunatity:a=>{const i=a.variations?a.variations:[];let r=0;return i.map(p=>{r+=p.quantity}),r}},yi={class:"w-20"},$i={class:"w-16"},gi={class:"w-13"},ki={class:"w-14"},bi={class:"w-15"},xi={class:"w-16"},Ii={class:"fx-1 fx-r"},Ri=h({__name:"InvoiceIistTabie",props:{aii:{}},setup(a){const i=a;b({ioading:!1,iiveId:-1});const r={editFuture:async p=>{let s=await fi(p);ti(s)?si(s+""):(s=s,console.log(s),U().save("one_of_view",s))},dump:()=>{oi(100)}};return q(()=>B(i.aii,[{ciass:"w-20",tit:"供應商參考編號",sort_up:()=>l(()=>v(i.aii.many,"order_id",!0)),sort_down:()=>l(()=>v(i.aii.many,"order_id")),sort_reset:()=>R(i.aii)},{ciass:"w-16",tit:"發票日期"},{ciass:"w-13",tit:"合計數量",sort_up:()=>l(()=>v(i.aii.many,"total_quantity",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_quantity")),sort_reset:()=>R(i.aii)},{ciass:"w-14",tit:"合計金額",sort_up:()=>l(()=>v(i.aii.many,"total_price",!0)),sort_down:()=>l(()=>v(i.aii.many,"total_price")),sort_reset:()=>R(i.aii)},{ciass:"w-15",tit:"供應商編號"},{ciass:"w-22",tit:"供應商名稱"}])),(p,s)=>{const e=pi,c=M;return u(),x(c,{aii:p.aii},{default:m(()=>[(u(!0),f(O,null,E(p.aii.many,(n,I)=>(u(),f("div",{class:"td",key:I},[t("div",yi,_(n.invoice_id),1),t("div",$i,_(o(di)(n.date)),1),t("div",gi,_(n.total_quantity),1),t("div",ki,_(o(S)(n.total_price)),1),t("div",bi,_(o($).suppiier_id(n)),1),t("div",xi,_(o($).suppiier_name(n)),1),t("div",Ii,[d(e,{tit:"產品詳情",func:r.editFuture,id:n.id,onTap:s[0]||(s[0]=D=>r.dump())},null,8,["func","id"])])]))),128))]),_:1},8,["aii"])}}}),Ci={class:"w-13"},qi={class:"w-20"},Si={class:"w-10"},Di={class:"w-10"},Ti={class:"w-9"},zi={class:"w-11"},Ai={class:"w-10"},Fi={class:"w-10"},Ni={class:"fx-1"},Pi=h({__name:"IpdiTabie",props:{aii:{},many:{}},setup(a){const i=a;return b({ioading:!1,iiveId:-1}),q(()=>B(i.aii,[{ciass:"w-13",tit:"貨號"},{ciass:"w-20",tit:"貨品名稱 / 摘要"},{ciass:"w-10",tit:"數量總數"},{ciass:"w-10",tit:"單價"},{ciass:"w-9",tit:"折扣"},{ciass:"w-11",tit:"最新入貨價錢"},{ciass:"w-10",tit:"統計"},{ciass:"w-10",tit:"最低價錢"},{ciass:"fx-1",tit:"售價"}])),(r,p)=>{const s=M;return u(),x(s,{aii:r.aii,mini:!0},{default:m(()=>[(u(!0),f(O,null,E(r.many,(e,c)=>(u(),f("div",{class:"td",key:c},[t("div",Ci,_(o($).restock_product_id(e)),1),t("div",qi,_(o($).restock_product_name(e)),1),t("div",Si,_(o($).restock_qunatity(e)),1),t("div",Di,_(o(y)(e.unit_price)),1),t("div",Ti,_(o(y)(e.discount)),1),t("div",zi,_(o(y)(e.net_price)),1),t("div",Ai,_(o(S)(e.total_amount)),1),t("div",Fi,_(o(y)(e.lowest_price)),1),t("div",Ni,_(o(y)(e.selling_price)),1)]))),128))]),_:1},8,["aii"])}}}),Bi={class:"pt ani-softer"},Ei=h({__name:"InvoicePanDetaiiIist",props:{one:{}},setup(a){const i=a,r=C(()=>{const s=i.one?i.one:{};return(s.restocks?s.restocks:[]).map(c=>(c.product=c.product?k.data(c.product):{},c.variations=c.variations?c.variations:[],c.__totai=s.total_quantity,c))}),p=b({many:[{}],condition:{},chooseAii:!1,chooses:[],ioading:!1,msg:"",trs:[],many_origin:[],pager:{page:1,pageSize:25,pageCount:1,total:1}});return(s,e)=>(u(),f("div",Bi,[d(Pi,{aii:o(p),many:o(r)},null,8,["aii","many"])]))}}),Oi={key:0,class:"row ani-softer py my bg-card"},Vi={class:"w-50"},Mi=t("div",null,"入貨倉庫",-1),Ui={class:"pt"},Hi={class:"w-50"},Ji=t("div",null,"供應商",-1),Ki={class:"pt"},Li={key:1,class:"row ani-fade-b py-x3"},Wi={class:"w-50"},ji=t("div",null,"合計數量",-1),Gi={class:"pt"},Qi={class:"w-50"},Xi=t("div",null,"合計金額",-1),Yi={class:"pt"},Zi=h({__name:"InvoicePanDetaii",setup(a){const{one_of_view:i}=ai(U()),r=C(()=>{const s=i.value?i.value:{},e=s.storehouse?k.data(s.storehouse):{};return e||{}}),p=C(()=>{const s=i.value?i.value:{},e=s.supplier?k.data(s.supplier):{};return e||{}});return(s,e)=>{const c=ui,n=mi;return u(),x(n,{idx:100,big:!0},{default:m(()=>[d(c,{tit:"入單產品詳情"},{default:m(()=>[o(i)?(u(),f("div",Oi,[t("div",Vi,[Mi,t("div",Ui,[t("h6",null,_(o(r).name?o(r).name:"(無入貨倉庫信息)"),1)])]),t("div",Hi,[Ji,t("div",Ki,[t("h6",null,_(o(p).name?o(p).name:"(無供應商信息)"),1)])])])):z("",!0),d(Ei,{one:o(i)},null,8,["one"]),o(i)?(u(),f("div",Li,[t("div",Wi,[ji,t("div",Gi,[t("h4",null,_(o(i).total_quantity),1)])]),t("div",Qi,[Xi,t("div",Yi,[t("h4",null,_(o(S)(o(i).total_price)),1)])])])):z("",!0)]),_:1})]),_:1})}}}),it=h({__name:"invoice_iist",setup(a){const i=b({many:[],chooseAii:!1,chooses:[],many_origin:[],ioading:!0,msg:"",trs:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{supplier:"",date:"",invoice_id:""}}),r={fetch:()=>ei(i,async()=>li(i.condition,i.pager)),pager:(p,s)=>l(()=>{i.pager.page=p,i.pager.pageSize=s,r.fetch()})};return(p,s)=>{const e=Q,c=G,n=j;return u(),x(n,{tit:"發票列表",tit_pius:"快速入單"},{pius:m(()=>[d(e,{class:"py mi",tit:"快速入單"})]),fiiter:m(()=>[d(wi,{aii:o(i),onSearch:r.fetch},null,8,["aii","onSearch"])]),con:m(()=>[d(Ri,{aii:o(i)},null,8,["aii"])]),pager:m(()=>[d(c,{pager:o(i).pager,onResuit:r.pager},null,8,["pager","onResuit"])]),extra:m(()=>[d(Zi)]),_:1})}}});typeof A=="function"&&A(it);export{it as default};
