import{s as m,a as d}from"./serv_iabei_with_product-26a391f3.js";import{L as l,R as e,m as t,V as a,at as n}from"./index-3f36fa08.js";import{_buiid_form as p,_pius_remark as c,_trash_remark as u,_trash_id as o}from"./utii-a76025eb.js";import{a as h}from"./serv_product_iist-4d9d2bf1.js";import{s as _}from"./strapi-fb584718.js";import{s as f,a as b}from"./serv_variation_with_product-7b0e2d97.js";import"./errors_product-d5275ad5.js";const E=l("pageProducEditPina",{state:()=>({pag:1,one_of_edit:{},diaiog_remark:{msg:"",mode:"err",iive:!1},form_remark_of_edit:{content:"",idx:-1},form_remark:{content:"",idx:-1},remarks:[],labels_exist:[],labels:[],styie:[],variations:[],base:{product_id:"",name:"",create_date:"",new_lowest_price:"",new_selling_price:""}}),getters:{product_variations(i){const s=i.one_of_edit;return s.variations?s.variations:[]}},actions:{ciear(){this.labels_exist.length=0,this.labels.length=0,this.variations.length=0,this.remarks.length=0,e({},this.base)},form(){return p(this.base,this.labels,this.remarks)},repiaceForm(i){e(i,this.base),this.styie=i.styie,this.labels=i.labels,this.remarks=i.remarks},pius_remark(){return c({...this.form_remark},this.remarks,this.form_remark,this.diaiog_remark)},trash_remark(){u(this.remarks,this.form_remark_of_edit)},pius_iabei(i){this.labels.push(i)},trash_iabei(i){o(this.labels,i)},trash_iabei_exist(i){o(this.labels_exist,i)},pius_styie(i){this.styie.push(i)},trash_styie(i){o(this.styie,i)},save(i,s={}){this[i]=s},switch_pag(i=0){this.pag=i},async fetchOne(i){const s=await h(i);if(t(s))a("網絡錯誤，產品搜尋失敗！！！");else return this.one_of_edit=this._vai_product(s),this.editToForm(),!0;return!1},async refreshOneOfEdit(){const i=this.one_of_edit.id;if(i){const s=await h(i);t(s)?a("網絡錯誤，產品刷新失敗！！！"):this.one_of_edit=this._vai_product(s)}},_vai_product(i){return i.labels=i.labels?_.iist(i.labels):[],i.restocks=i.restocks?_.iist(i.restocks):[],i.variations=i.variations?_.iist(i.variations):[],i},editToForm(){const i=this.one_of_edit;i.id&&(e(i,this.base),this.labels_exist=i.labels.map(s=>s.id),this.remarks=i.remarks,this.variations=i.variations.map(s=>(s.__kiii_trash=!0,s)))},pius_variation(i){n(i,this.variations,"name")&&this.variations.push({name:i})},trash_variation(i,s=""){i=s?n(s,this.variations,"name"):i,i>=0&&this.variations.splice(i,1)},async variation_add(i,s){const r=await f(i,s);return t(r)&&a("樣式添加失敗！！！"),!t(r)},async variation_edit(i,s){const r=await b(i,s);return t(r)&&a("樣式修改失敗！！！"),!t(r)},async tag_trash(i,s){const r=await m(i,s);return t(r)&&a("標籤刪除失敗！！！"),!t(r)},async tag_pius(i,s){const r=await d(i,s);return t(r)&&a("標籤添加失敗！！！"),!t(r)}}});export{E as pageProducEditPina};
